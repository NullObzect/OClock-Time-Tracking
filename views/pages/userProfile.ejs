<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile</title>
    <link rel="stylesheet" href="<% process.env.BASE_URL %>/css/styles.css" />

    <style>
      .animated {
        -webkit-animation-duration: 1s;
        animation-duration: 1s;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
      }

      .animated.faster {
        -webkit-animation-duration: 500ms;
        animation-duration: 500ms;
      }

      .fadeIn {
        -webkit-animation-name: fadeIn;
        animation-name: fadeIn;
      }

      .fadeOut {
        -webkit-animation-name: fadeOut;
        animation-name: fadeOut;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }

        to {
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container mx-auto md:mt-6">
      <div class="grid sm:grid-cols-12">
        <!-- User side navbar -->
        <div class="sm:col-span-3 xs:col-span-12 justify-center items-center">
          <div class="justify-center items-center mb-3">
            <% let url = avatar %> <% if(url.search('https://') === -1){ %>
            <img
              class="rounded-full h-20 w-20 object-cover"
              src="/uploads/avatars/<%= avatar %>"
            />
            <% } else {%>
            <img
              class="rounded-full h-20 w-20 object-cover"
              src="<%= avatar %>"
            />
            <% } %> <% console.log(url.search('https://') === -1) %>

            <div>
              <% console.log('user name', loggedInUser.userMailFormDB) %>
              <h4 class="text-xl font-medium"><%= loggedInUser.userName %></h4>
              <small class="font-medium"
                ><%= loggedInUser.userMailFormDB %>
              </small>
              <% if(status === 2) {%>
              <button class="px-3 py-0 text-sm bg-yellow-300 rounded-full">
                <a href="/user-verify"
                  ><small class="font-medium text-white shadow-lg"
                    >Unverfied</small
                  ></a
                >
              </button>
              <% } else{ %>
              <button class="px-3 py-0 text-sm bg-green-300 rounded-full">
                <small class="font-medium text-white shadow-lg">verified</small>
              </button>
              <% } %>
            </div>
          </div>
          <ul>
            <a href="/"><li class="p-3 font-bold text-uppercase">Home</li> </a>
            <li class="p-3 font-bold text-uppercase">Public profile</li>
            <li class="p-3 font-bold text-uppercase">Account settings</li>
            <li class="p-3 font-bold text-uppercase">Claim</li>
            <li class="p-3 font-bold text-uppercase">Notifications</li>
          </ul>
        </div>
        <div class="sm:col-span-9 xs:col-span-12">
          <div class="">
            <div class="px-4 py-2 rounded-md relative">
              <!-- Change profile-->
              <div>
                <% if(url.search('https://') === -1){ %>
                <img
                  class="rounded-full h-20 w-20 object-cover"
                  src="/uploads/avatars/<%= avatar %>"
                />
                <% } else{%>
                <img
                  class="rounded-full h-20 w-20 object-cover"
                  src="<%= avatar %>"
                />
                <% } %>
                <!--End change profile-->
              </div>

              <div class="absolute top-12 mt-2 ml-13">
                <button
                  class="cursor-pointer rounded-full shadow-md bg-blue-200 p-1"
                  onclick="openModal()"
                >
                  <img
                    src="https://img.icons8.com/fluency/25/000000/add-image.png"
                  />
                </button>
              </div>

              <!-- Markup for user Connection -->
              <div class="mt-3">
                <!-- <%# platformUser.map((el)=>{ %>
                <p><%# el.user_name %></p>
                <img class="" src="<%# el.user_avatar %>" />

                <%# }) %> -->
                <h5 class="text-md font-medium mb-1">Connect with</h5>

                <% if(platformUser.find(connection => connection.platform ===
                'facebook')) {%>
                <button
                  title="Remove"
                  class="
                    btn-hover
                    px-3
                    py-1
                    rounded-full
                    text-sm
                    font-medium
                    text-white
                    bg-blue-600
                  "
                >
                  <% let fbUserName = platformUser.find(el => el.platform ===
                  'facebook') %> <%= fbUserName.user_name %>
                </button>

                <% } else{ %>
                <a href="/auth/facebook">
                  <button
                    title="Connect"
                    class="
                      px-3
                      py-1
                      rounded-full
                      text-sm
                      font-medium
                      text-white
                      bg-blue-600
                    "
                  >
                    facebook
                  </button>
                </a>

                <% } %> <% if(platformUser.find(connection =>
                connection.platform === 'google')) {%>
                <button
                  title="Remove"
                  class="
                    btn-hover-google
                    px-3
                    py-1
                    rounded-full
                    text-sm
                    font-medium
                    text-white
                    bg-red-400
                  "
                >
                  <% let googleUserName = platformUser.find(el => el.platform
                  === 'google') %> <%= googleUserName.user_name %>
                </button>

                <% } else{ %>
                <a href="/auth/google">
                  <button
                    title="Connect"
                    class="
                      px-3
                      py-1
                      rounded-full
                      text-sm
                      font-medium
                      text-white
                      bg-red-400
                    "
                  >
                    google
                  </button>
                </a>

                <% } %>
                <button
                  class="
                    px-3
                    py-1
                    rounded-full
                    text-sm
                    font-medium
                    text-white
                    bg-blue-400
                  "
                >
                  twitter
                </button>
              </div>
            </div>
          </div>

          <!-- Markup for Edit user data-->

          <div
            class="
              mt-3
              w-full
              max-w-2xl
              px-6
              py-4
              bg-white
              rounded-md
              dark:bg-gray-800
            "
          >
            <div class="mt-2">
              <div class="items-center -mx-2 md:flex">
                <div class="w-full mx-2">
                  <label
                    class="
                      block
                      mb-2
                      text-sm
                      font-medium
                      text-gray-600
                      dark:text-gray-200
                    "
                    >Name</label
                  >

                  <input
                    class="
                      block
                      w-full
                      px-4
                      py-2
                      text-gray-700
                      bg-white
                      border border-gray-300
                      rounded-md
                      dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600
                      focus:border-blue-500
                      dark:focus:border-blue-500
                      focus:outline-none focus:ring
                    "
                    type="text"
                    value="<%= user_name %>"
                  />
                </div>

                <div class="w-full mx-2 mt-4 md:mt-0">
                  <label
                    class="
                      block
                      mb-2
                      text-sm
                      font-medium
                      text-gray-600
                      dark:text-gray-200
                    "
                    >Phone Number</label
                  >

                  <input
                    class="
                      block
                      w-full
                      px-4
                      py-2
                      text-gray-700
                      bg-white
                      border border-gray-300
                      rounded-md
                      dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600
                      focus:border-blue-500
                      dark:focus:border-blue-500
                      focus:outline-none focus:ring
                    "
                    type="number"
                    value="<%= user_phone %>"
                  />
                </div>
              </div>

              <div class="w-full mt-4">
                <label
                  class="
                    block
                    mb-2
                    text-sm
                    font-medium
                    text-gray-600
                    dark:text-gray-200
                  "
                  >Short bio</label
                >

                <textarea
                  class="
                    block
                    w-full
                    h-40
                    px-4
                    py-2
                    text-gray-700
                    bg-white
                    border border-gray-300
                    rounded-md
                    dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600
                    focus:border-blue-500
                    dark:focus:border-blue-500
                    focus:outline-none focus:ring
                  "
                  placeholder="Describe yourself"
                ></textarea>
              </div>

              <div class="flex justify-center gap-4 mt-5">
                <button
                  class="
                    px-4
                    py-2
                    text-white
                    transition-colors
                    duration-200
                    transform
                    bg-gray-400
                    rounded-md
                    hover:bg-gray-600
                    focus:outline-none focus:bg-gray-600
                  "
                >
                  Reset
                </button>
                <button
                  class="
                    px-4
                    py-2
                    text-white
                    transition-colors
                    duration-200
                    transform
                    bg-gray-400
                    rounded-md
                    hover:bg-gray-600
                    focus:outline-none focus:bg-gray-600
                  "
                >
                  Save
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- modale -->
    <div
      class="
        main-modal
        fixed
        w-full
        h-100
        inset-0
        z-50
        overflow-hidden
        flex
        justify-center
        items-center
        animated
        fadeIn
        faster
      "
      style="background: rgba(0, 0, 0, 0.7)"
    >
      <div
        class="
          border border-teal-500
          shadow-lg
          modal-container
          bg-white
          w-11/12
          md:max-w-md
          mx-auto
          rounded
          shadow-lg
          z-50
          overflow-y-auto
        "
      >
        <div class="modal-content py-4 text-left px-5">
          <!--Title-->
          <div class="flex justify-between items-center pb-3">
            <p class="text-2xl font-bold">Profile</p>
            <div class="modal-close cursor-pointer z-50">
              <svg
                class="fill-current text-black"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 18 18"
              >
                <path
                  d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"
                ></path>
              </svg>
            </div>
          </div>
          <!--Body-->
          <div class="my-3 relative">
            <div>
              <% if(url.search('https://') === -1){ %>
              <img
                class="rounded-full h-20 w-20 object-cover"
                src="/uploads/avatars/<%= avatar %>"
              />
              <% } else{%>
              <img
                class="rounded-full h-20 w-20 object-cover"
                src="<%= avatar %>"
              />
              <% } %>
              <label class="absolute top-12 left-40">
                <input class="hidden" type="file" />
                <small
                  class="
                    text-sm
                    font-medium
                    cursor-pointer
                    rounded-full
                    px-4
                    py-2
                    bg-gray-200
                  "
                >
                  Change
                </small>
              </label>
              <div>
                <h5 class="text-sm mb-1">Sync a profile picture with</h5>

                <div class="flex justify-between mt-3 items-center">
                  <div>
                    <% let facebookProfile = platformUser.find(connection =>
                    connection.platform === 'facebook') %> <%
                    if(facebookProfile){ %>

                    <img
                      class="h-16 w-16 ml-2 mb-2 rounded-full"
                      src="<%= facebookProfile.user_avatar %>"
                    />

                    <a href="/profile/picture/<%= facebookProfile.id %>">
                      <button
                        class="
                          px-3
                          py-1
                          rounded-full
                          text-sm
                          font-medium
                          text-white
                          bg-blue-400
                        "
                      >
                        facebook
                      </button>
                    </a>
                    <% } else{%>

                    <a href="/auth/facebook">
                      <button
                        class="
                          px-3
                          py-1
                          rounded-full
                          text-sm
                          font-medium
                          text-white
                          bg-blue-600
                        "
                      >
                        Add Facebook
                      </button>
                    </a>

                    <% } %>
                  </div>

                  <div>
                    <% let googleProfile = platformUser.find(connection =>
                    connection.platform === 'google') %> <% if(googleProfile){
                    %>
                    <img
                      class="h-16 w-16 mb-2 ml-1 rounded-full"
                      src="<%= googleProfile.user_avatar %>"
                    />
                    <a href="/profile/picture/<%= googleProfile.id  %>">
                      <button
                        class="
                          px-3
                          py-1
                          rounded-full
                          text-sm
                          font-medium
                          text-white
                          bg-blue-400
                        "
                      >
                        google
                      </button>
                    </a>
                    <% } else{ %>

                    <a href="/auth/google">
                      <button
                        class="
                          px-3
                          py-1
                          rounded-full
                          text-sm
                          font-medium
                          text-white
                          bg-red-400
                        "
                      >
                        Add Google
                      </button>
                    </a>
                    <% } %>
                  </div>

                  <div>
                    <img
                      class="h-16 w-16 mb-2 rounded-full"
                      src="https://img.icons8.com/color/96/000000/circled-user-male-skin-type-7--v2.png"
                    />

                    <button
                      class="
                        px-3
                        py-1
                        rounded-full
                        text-sm
                        font-medium
                        text-white
                        bg-blue-400
                      "
                    >
                      twitter
                    </button>
                  </div>
                </div>
              </div>
              <!--End change profile-->
            </div>
          </div>
          <!--Footer-->
          <div class="flex justify-end pt-2">
            <button
              class="
                focus:outline-none
                modal-close
                px-3
                py-2
                bg-blue-400
                rounded-lg
                text-white
                hover:bg-gray-300
              "
            >
              Cancel
            </button>
            <button
              class="
                focus:outline-none
                px-4
                bg-teal-500
                py-2
                ml-3
                rounded-lg
                text-white
                bg-green-400
              "
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- <button class="btn-hover bg-blue-500 px-4">hover</button> -->
    <script>
      //modal
      const modal = document.querySelector(".main-modal");
      const closeButton = document.querySelectorAll(".modal-close");

      const modalClose = () => {
        modal.classList.remove("fadeIn");
        modal.classList.add("fadeOut");
        setTimeout(() => {
          modal.style.display = "none";
        }, 500);
      };

      const openModal = () => {
        modal.classList.remove("fadeOut");
        modal.classList.add("fadeIn");
        modal.style.display = "flex";
      };

      for (let i = 0; i < closeButton.length; i++) {
        const elements = closeButton[i];

        elements.onclick = (e) => modalClose();

        modal.style.display = "none";

        window.onclick = function (event) {
          if (event.target == modal) modalClose();
        };
      }
      // for facebook
      const hoverBtn = document.getElementsByClassName("btn-hover")[0];
      console.log(hoverBtn.textContent);
      console.log(hoverBtn.textContent);
      const hoverBtnText = hoverBtn.innerText;
      hoverBtn.addEventListener("mouseenter", () => {
        //alert("ok");
        hoverBtn.innerHTML = `<a href="/remove/facebook">Remove</a>`;
      });
      setTimeout(() => {
        hoverBtn.addEventListener("mouseleave", () => {
          hoverBtn.innerHTML = hoverBtnText;
        });
      }, 2000);

      // for google
      const googleHoverBtn =
        document.getElementsByClassName("btn-hover-google")[0];

      const googleHoverBtnText = googleHoverBtn.innerText;

      googleHoverBtn.addEventListener("mouseenter", () => {
        //alert("ok");
        googleHoverBtn.innerHTML = `<a href="/remove/google">Remove</a>`;
      });
      setTimeout(() => {
        googleHoverBtn.addEventListener("mouseleave", () => {
          googleHoverBtn.innerHTML = googleHoverBtnText;
        });
      }, 2000);
    </script>
  </body>
</html>
