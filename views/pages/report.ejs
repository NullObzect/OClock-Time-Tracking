<%- include("../partials/header"); -%>


<!-- Markup top  card for employee activits -->
<div class="">
  <div class="flex justify-between gap-4">
    <div
      class="
        px-4
        py-6
        rounded-md
        bg-pink-200
        border-l-4 border-blue-400
        shadow-lg
      "
    >
      <h3>Avarage Work Start Time</h3>
      <h4><b><%= avgStartTime || '00:00' %> </b></h4>
    </div>
    <div
      class="
        px-4
        py-6
        rounded-md
        bg-yellow-200
        border-l-4 border-green-400
        shadow-lg
      "
    >
      <h3>Avarage Work End Time</h3>
      <h4><b><%= avgEndTime || '00:00' %> </b></h4>
    </div>
    <div
      class="
        px-4
        py-6
        rounded-md
        bg-green-200
        border-l-4 border-yellow-400
        shadow-lg
      "
    >
      <h3>This Week Total Work Hours</h3>
      <h4><b><%= weekHr %> </b></h4>
    </div>
    <div
      class="
        px-4
        py-6
        rounded-md
        bg-yellow-400
        border-l-4 border-pink-400
        shadow-lg
      "
    >
      <h3>This Month Total Work Hours</h3>
      <h4><b><%= monthHr %> </b></h4>
    </div>
  </div>
</div>

<!-- Markup Date range for employee-->

<div class="mt-5 flex justify-between">
  <div>
    <h4 class="text-xl font-bold">Reports</h4>
  </div>
  <div>
    <input
      type="date"
      class="p-2 bg-blue-200 rounded-md cursor-pointer shadow-md"
      onchange="selectStartDate(event)"
    />
    <small class="p-2 text-md font-bold">To</small>
    <input
      type="date"
      class="p-2 bg-blue-200 rounded-md cursor-pointer shadow-md"
      onchange="selectEndDate(event)"
    />
  </div>
</div> 

<!-- 
<div class="mt-5 flex justify-between">
  <div>
    <h4 class="text-xl font-bold">Reports</h4>
  </div>

<div date-rangepicker class="flex items-center">
  <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
        </div>
        <input  type="text"  onblur="selectStartDate(event)" name="start"  
        class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 datepicker-input" placeholder="Select date start"  >
    </div>
  <span class="mx-4 text-gray-500">to</span>
  <div class="relative">
    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <svg class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
    </div>
    <input name="end" type="text"  onchange="selectEndDate(event)"
    class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 datepicker-input" placeholder="Select date end">
</div>
</div>

</div>   -->



<!-- Markup report table for employee -->
<div class="bg-white flex justify-center mt-4">
  <div class="col-span-12">
    <div class="overflow-auto lg:overflow-visible">
      <table
        class="table-report text-gray-400 border-separate space-y-6 text-sm"
      >
        <thead class="bg-blue-500 text-white">
          <tr>
            <th class="p-3">Day</th>
            <th class="p-3">DATE</th>
            <th class="p-3 text-left">IN</th>
            <th class="p-3 text-left">OUT</th>
            <th class="p-3 text-left">Type</th>

            <th class="p-3 text-left">Fixed Time</th>
            <th class="p-3 text-left">Working Time</th>
            <th class="p-3 text-left">Less / Extra</th>
          </tr>
        </thead>
        <tbody id="an-user-report">
        
          
          <% userReport.map(el => {%>
            <%# console.log('holiday',el.date_for_holiday) %> 
            <%#console.log('day',el.day) %> 
          <tr
            class="
              <%=
              el.day===
              "Friday"
              ?
              "bg-red-200": el.type === "holiday"
             
              ? "bg-yellow-200" : el.type === "leave" ? "bg-red-400"  :  "bg-blue-200"
              
              
              %>
              text-black
            "
          >
          <td class="p-3"><%= el.day %></td>
            <td class="p-3 font-medium capitalize"><%= el.date  %></td>
            <td class="p-3">
              <%=  el.start  %>
            </td>
          
            <td class="p-3"><%=  el.end %></td>
            <td class="p-3 font-medium"><%= el.day === 'Friday' ? 'Off day' : el.type %></td>

            <td class="p-3"><%= el.day === 'Friday' ? '0' : el.fixed_time  %></td>
            <td class="p-3"><%= el.working_time %></td>
            <td class="p-3">
              <%= el.day === 'Friday' ? el.working_time : el.time_count %>
            </td>
            
          </tr>
          <% }) %>
        </tbody>

        <tfoot id="last-seven-days-total" >
          <% employeeLastSevendaysReportTotal.map(el => {%> 

          <tr class="bg-blue-500 text-center text-white font-bold">
            <td colspan="2">Total = </td>
          <td class="p-3"><%= el.avgStartTime  || '00' %> </td>
          <td class="p-3"><%= el.avgEndTime  || '00'%> </td>
          <td class="p-3"></td>
          <td class="p-3"></td>
          <td class="p-3"><%= el.weekTotal || '00' %> </td>
          <td class="p-3"></td>
          </tr>
        <% })  %> 
        </tfoot>
      </table>
    </div>
  </div>
</div>
<script src="https://unpkg.com/@themesberg/flowbite@1.1.1/dist/datepicker.bundle.js"></script>
<script src="<%=baseUrl%>/js/report.js"></script>
<%- include("../partials/footer"); -%>
